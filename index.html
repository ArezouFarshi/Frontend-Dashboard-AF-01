<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DPP Dashboard — Smart Façade Panels</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="hero">
    <div class="hero__content">
      <h1>Digital Product Passport Dashboard</h1>
      <p class="subtitle">Blockchain‑secured lifecycle and anomaly monitoring for smart façade panels</p>
    </div>
  </header>

  <main class="container">
    <section class="panel-selector card">
      <h2>Select panel</h2>
      <div class="form-row">
        <label for="panelId"><span>Panel ID</span></label>
        <input type="text" id="panelId" placeholder="e.g., ID_27_C_42" />
        <button id="btnLoadAll">Load panel data</button>
      </div>
      <p class="hint">Only enter the panel code. Backend, RPC and contract are preconfigured.</p>
    </section>

    <section class="project-info card">
      <h2>Project information</h2>
      <div id="projectMeta" class="meta-grid">
        <!-- Filled dynamically from JSON -->
      </div>
    </section>

    <section class="dpp-json card">
      <div class="section-header">
        <h2>DPP data (filtered)</h2>
        <div class="actions">
          <a id="jsonLink" href="#" target="_blank">Open raw JSON</a>
          <select id="accessTier">
            <option value="public">Public</option>
            <option value="tier1">Tier 1</option>
            <option value="tier2" selected>Tier 2</option>
          </select>
          <button id="btnLoadDpp">Refresh JSON</button>
        </div>
      </div>
      <pre id="jsonOut" class="code"></pre>
    </section>

    <section class="events card">
      <div class="section-header">
        <h2>Blockchain event log</h2>
        <div class="legend">
          <span class="badge b-blue">normal</span>
          <span class="badge b-yellow">warning</span>
          <span class="badge b-red">fault</span>
          <span class="badge b-purple">system error</span>
        </div>
      </div>
      <div id="eventsHelp" class="muted">Click “Load panel data” to fetch the anomaly history.</div>
      <table id="eventsTable" class="hidden">
        <thead>
          <tr>
            <th>Timestamp</th>
            <th>Prediction</th>
            <th>Color</th>
            <th>Status</th>
            <th>Reason</th>
            <th>TX</th>
          </tr>
        </thead>
        <tbody id="eventsBody"></tbody>
      </table>
    </section>
  </main>

  <footer class="footer">
    <p>Powered by Sepolia Testnet • Single backend and frontend for all panels</p>
  </footer>

  <!-- Ethers v6 UMD -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.7.0/dist/ethers.umd.min.js"></script>
  <script src="dashboard.js"></script>
</body>
</html>
